/*! frizzly 2014-11-22 */
!function(a){String.format||(String.format=function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}),window.frizzly=function(){var b={beforeReady:0,afterReady:1},c={state:b.beforeReady},d={};d.attr={},d.attr.prefix="data-frizzly",d.attr.type=d.attr.prefix+"Type",d.attr.postTitle=d.attr.prefix+"PostTitle",d.attr.postUrl=d.attr.prefix+"PostUrl",d.attr.imageUrl=d.attr.prefix+"ImageUrl",d.attr.imageAlt=d.attr.prefix+"ImageAlt",d.attr.imageTitle=d.attr.prefix+"ImageTitle",d.attr.imageDescription=d.attr.prefix+"ImageDescription",d.attr.imageCaption=d.attr.prefix+"ImageCaption",d.attr.buttonSet=d.attr.prefix+"ButtonSet",d.attr.theme=d.attr.prefix+"Theme",d.attr.align=d.attr.prefix+"Align",d.cssClass={},d.cssClass.prefix="frizzly-",d.cssClass.container=d.cssClass.prefix+"container",d.cssClass.iconPrefix=d.cssClass.prefix+"icon-",d.cssClass.alignLeft=d.cssClass.prefix+"left",d.cssClass.alignCenter=d.cssClass.prefix+"center",d.cssClass.alignRight=d.cssClass.prefix+"right",d.buttonTypes={pinterestShare:"pinterest",twitterShare:"twitter",facebookShare:"facebook"},d.debug=function(a){console.log("Frizzly.log"),console.log(a)},d.init=function(){var a=window.console=window.console||{};a.log||(a.log=function(){}),d.main.settings.debug=-1!=window.location.search.indexOf("frizzlydebug")},d.themes={},d.getTheme=function(a){return d.themes.hasOwnProperty(a)?d.themes[a]:d.themes.default48},d.addTheme=function(a,b){d.themes[a]=b};var e={buttons:{}};return e.buttons[d.buttonTypes.pinterestShare]={height:48,width:48},e.buttons[d.buttonTypes.twitterShare]={height:48,width:48},e.buttons[d.buttonTypes.facebookShare]={height:48,width:48},d.addTheme("default48",e),d.buttonSets={},d.getButtonSet=function(a){return d.buttonSets.hasOwnProperty(a)?d.buttonSets[a]:d.buttonSets["default"]},d.addButtonSet=function(a,b){d.buttonSets[a]=b},d.addButtonSet("default",[d.buttonTypes.pinterestShare,d.buttonTypes.facebookShare,d.buttonTypes.twitterShare]),d.getAlignmentClass=function(a){switch(a){case"right":return d.cssClass.alignRight;case"center":return d.cssClass.alignCenter;case"left":default:return d.cssClass.alignLeft}},d.moduleNames={main:"main",hover:"hover",lightbox:"lightbox",shortcode:"shortcode",buttonSettings:"buttonSettings"},d.module={},d.main=d.module[d.moduleNames.main]=function(){var b={debug:1},c={};return c.settings=b,c.setSettings=function(c){b=a.extend(b,c)},c}(),d.setSettings=function(a){d.debug(a);for(var b in a.buttonSets)a.buttonSets.hasOwnProperty(b)&&d.addButtonSet(b,a.buttonSets[b]);for(var c in a.themes)a.themes.hasOwnProperty(c)&&d.addTheme(c,a.themes[c]);for(var e in a.modules)a.modules.hasOwnProperty(e)&&d.module.hasOwnProperty(e)&&d.module[e].setSettings(a.modules[e])},d.triggerActiveModules=function(a){for(var b in d.module)d.module.hasOwnProperty(b)&&"function"==typeof d.module[b][a]&&-1!=d.main.settings.activeModules.indexOf(b)&&d.module[b][a]()},d.call=function(e,f,g){return c.state==b.beforeReady?void a(this).bind("frizzlyReady",function(){d.call(e,f,g)}):void(d.module.hasOwnProperty(e)&&"function"==typeof d.module[e][f]&&-1!=d.main.settings.activeModules.indexOf(e)&&d.module[e][f].call(d.module[e],g))},d.onReady=function(){d.debug("onReady"),d.triggerActiveModules("onReady"),c.state=b.afterReady,a(this).triggerHandler("frizzlyReady")},d.onResize=function(){d.debug("onResize"),d.triggerActiveModules("onResize")},d}(),a(function(){frizzly.init(),frizzly.setSettings(FrizzlySettings),frizzly.onReady(),a(window).resize(frizzly.onResize)})}(jQuery),function(a){frizzly.functions={transferDataAttributes:function(a,b){var c=a.data();for(var d in c)c.hasOwnProperty(d)&&b.attr("data-"+d,c[d])},transferFrizzlyDataAttributes:function(b,c){var d=/^data\-frizzly(.+)$/;a.each(b.get(0).attributes,function(a,b){d.test(b.nodeName)&&c.attr(b.nodeName,b.nodeValue)})},uniqueArray:function(b){var c=[];return a.each(b,function(b,d){-1==a.inArray(d,c)&&c.push(d)}),c},getUrlExtension:function(a){var b=a.split(".");return 1==b.length?"":b.pop().split(/\#|\?/)[0]},isInCurrentDomain:function(a){var b=document.domain.replace(/^www./,"");return-1!=a.indexOf(b)},isImageExtension:function(a){for(var b=["jpg","jpeg","png","bmp","gif"],c=0;c<b.length;c++)if(a==b[c].toLowerCase())return!0;return!1},getLinkedImage:function(a){var b=a.parents("a").first();if(b.length){var c=b.attr("href"),d=!!c,e=frizzly.functions.getUrlExtension(c);if(d&&frizzly.functions.isImageExtension(e)&&frizzly.functions.isInCurrentDomain(c))return c}return""}}}(jQuery),function(a){frizzly.baseClasses={},frizzly.baseClasses.BaseElement=function(){this.$element=null},frizzly.baseClasses.BaseElement.prototype.addAttr=function(a,b){this.$element.attr(a,b)},frizzly.baseClasses.BaseElement.prototype.addClass=function(a){this.$element.addClass(a)},frizzly.baseClasses.BaseElement.prototype.click=function(a){this.$element.click(a)},frizzly.baseClasses.Icon=function(b,c,d){frizzly.baseClasses.BaseElement.call(this),this.width=b,this.height=c,this.$element=a("<a/>"),this.addAttr(frizzly.attr.type,d),this.addAttr("href","#"),this.$iconElement=a("<div/>").addClass(frizzly.cssClass.iconPrefix+d),this.$iconElement.html(a("<div/>").addClass(frizzly.cssClass.prefix+"inner"))},frizzly.baseClasses.Icon.prototype=new frizzly.baseClasses.BaseElement,frizzly.baseClasses.Icon.prototype.createElement=function(){return this.$element.html(this.$iconElement)},frizzly.baseClasses.BaseContainer=function(b){switch(this.icons=[],this.width=0,this.height=0,this.$element=a("<div/>"),b){case"vertical":this.updateContainerSize=this.updateSizeVertical;break;case"horizontal":this.updateContainerSize=this.updateSizeHorizontal}this.addClass(frizzly.cssClass.container)},frizzly.baseClasses.BaseContainer.prototype=new frizzly.baseClasses.BaseElement,frizzly.baseClasses.BaseContainer.prototype.updateSizeHorizontal=function(a,b){this.width+=a,this.height=b>this.height?b:this.height},frizzly.baseClasses.BaseContainer.prototype.updateSizeVertical=function(a,b){this.height+=b,this.width=a>this.width?a:this.width},frizzly.baseClasses.BaseContainer.prototype.createContainer=function(){for(var a=[],b=0;b<this.icons.length;b++)a.push(this.icons[b].createElement());return this.$element.css("height",this.height+"px").css("width",this.width+"px").html(a)},frizzly.baseClasses.BaseContainer.prototype.addIcon=function(a){return this.icons.push(a),this.updateContainerSize(a.width,a.height),this},frizzly.baseClasses.ClickHandlerArg=function(){this.url="",this.imageAttributes={src:"",title:"",alt:"",description:"",caption:""},this.articleAttributes={title:""}}}(jQuery),function(a){frizzly.buttons=frizzly.module[frizzly.moduleNames.buttonSettings]=function(){function b(a,b,c,d){var e=Math.round(screen.height/2-d/2),f=Math.round(screen.width/2-c/2),g=String.format("width={0},height={1},status=0,toolbar=0,menubar=0,location=1,scrollbars=1,top={2},left={3}",c,d,e,f);window.open(a,b,g)}function c(a,c){var d=e.hasOwnProperty(a)?e[a]:!1;return d&&b(d.createLink(c),d.windowTitle,d.windowWidth,d.windowHeight),!1}var d={pinterestImageDescription:["titleAttribute","altAttribute"],pinterestPinFullImages:"1",twitterHandle:""},e={};e[frizzly.buttonTypes.pinterestShare]={windowWidth:632,windowHeight:453,windowTitle:"Pinterest",createLink:function(a){function b(a,b){switch(b){case"titleAttribute":return a.imageAttributes.title;case"altAttribute":return a.imageAttributes.alt;case"mediaLibraryDescription":return a.imageAttributes.description;case"mediaLibraryCaption":return a.imageAttributes.caption;case"postTitle":return a.articleAttributes.title;default:return""}}for(var c="",e=0;e<d.pinterestImageDescription.length&&!c;e++)c=b(a,d.pinterestImageDescription[e]);return String.format("http://pinterest.com/pin/create/bookmarklet/?is_video=false&url={0}&media={1}&description={2}",encodeURIComponent(a.url),encodeURIComponent(a.imageAttributes.src),encodeURIComponent(c))}},e[frizzly.buttonTypes.twitterShare]={windowWidth:550,windowHeight:470,windowTitle:"Twitter",createLink:function(a){var b="";return d.twitterHandle&&(b=String.format("&via={0}",d.twitterHandle)),String.format("https://twitter.com/intent/tweet?text={0}&url={1}{2}",encodeURIComponent(a.articleAttributes.title),encodeURIComponent(a.url),b)}},e[frizzly.buttonTypes.facebookShare]={windowWidth:550,windowHeight:420,windowTitle:"Facebook",createLink:function(a){return String.format("https://www.facebook.com/sharer/sharer.php?u={0}&display=popup",encodeURIComponent(a.url))}};var f={};return f.settings=d,f.setSettings=function(b){d=a.extend(d,b)},f.handleClick=function(a,b){return c(a,b)},f}()}(jQuery),function(a){frizzly[frizzly.moduleNames.hover]=frizzly.module[frizzly.moduleNames.hover]=function(){function b(a,b){frizzly.baseClasses.BaseContainer.call(this,a),this.addClass(u.overlay),this.addAttr(t.index,b)}function c(){return++s}function d(a){return a[0].clientHeight>=v.minImageHeight&&a[0].clientWidth>=v.minImageWidth&&a.not(v.ignoreSelector).length>0&&a.filter(v.enabledClasses).length>0}function e(a,b,c){var d=a.parents(String.format("[{0}]",t.postContainer));return d.attr(b)||c}function f(a){return e(a,frizzly.attr.postUrl,document.URL)}function g(a){return e(a,frizzly.attr.postTitle,document.title)}function h(a,b){var c=0,d=0,e=function(){return Math.round(a.height/2-b.height/2)},f=function(){return Math.round(a.height-b.height)},g=function(){return Math.round(a.width/2-b.width/2)},h=function(){return Math.round(a.width-b.width)};switch(v.hoverPanelPosition){case"top-left":c=0,d=0;break;case"top-middle":c=0,d=g();break;case"top-right":c=0,d=h();break;case"middle-left":c=e(),d=0;break;case"middle-middle":c=e(),d=g();break;case"middle-right":c=e(),d=h();break;case"bottom-left":c=f(),d=0;break;case"bottom-middle":c=f(),d=g();break;case"bottom-right":c=f(),d=h()}return{top:c+v.hoverPanelOffsetTop,left:d+v.hoverPanelOffsetLeft}}function i(a){return void 0!==a?String.format('div.{0}[{1}="{2}"]',u.overlay,t.index,a):String.format("div.{0}",u.overlay)}function j(a){return String.format('img[{0}="{1}"]',t.index,a)}function k(){var a=[];return"1"==v.showOnLightbox&&a.push("img.cboxPhoto"),""!==v.imageSelector&&a.push(String.format("{0}:not([{1}])",v.imageSelector,t.ignore)),a.join(",")}function l(b){var c=b.prop("tagName"),d="",e="";switch(c.toLowerCase()){case"div":case"span":d=b.css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");break;case"img":d=a.fn.prop&&b.prop("src")||b.attr("src");break;default:return""}return"1"==frizzly.buttons.settings.generalUseFullImages&&(e=frizzly.functions.getLinkedImage(b)||d),""!=e?e:d}function m(a){var c=v.theme,d=frizzly.getButtonSet(v.buttonSet),e=frizzly.getTheme(c),f=new b(v.orientation,a);f.addClass("frizzly-"+c);for(var g=0;g<d.length;g++){var h=new frizzly.baseClasses.Icon(e.buttons[d[g]].width,e.buttons[d[g]].height,d[g]);h.click(q),f.addIcon(h)}return f}function n(){var b=a(this);!b.attr(t.index)&&d(b)&&b.attr(t.index,c());var e=b.attr(t.index);if(!e)return void b.attr(t.ignore,"");var f=a(i(e));if(0===f.length){var g=m(e),j=g.createContainer(),k=h({height:b[0].clientHeight,width:b[0].clientWidth},{height:g.height,width:g.width}),l=b.offset(),n={top:l.top+k.top,left:l.left+k.left};b.addClass(v.imageHoverClass),b.after(j),j.offset(n).addClass(u.visible)}else p(f)}function o(b){var c=setTimeout(function(){var c=b.attr(t.index),d=a(j(c));d.removeClass(v.imageHoverClass),b.removeClass(u.visible),b.attr(t.timeoutId2,setTimeout(function(){b.remove()},600))},100);b.attr(t.timeoutId,c)}function p(b){clearTimeout(b.attr(t.timeoutId2)),clearTimeout(b.attr(t.timeoutId)),b.addClass(u.visible);var c=b.attr(t.index),d=a(j(c));d.addClass(v.imageHoverClass)}function q(){var b=a(this),c=b.attr(frizzly.attr.type),d=b.parent(String.format("div.{0}",frizzly.cssClass.container)).attr(t.index),e=a(String.format('[{0}="{1}"]',t.index,d)),h=new frizzly.baseClasses.ClickHandlerArg;return h.url=f(e),h.imageAttributes.src=l(e),h.imageAttributes.alt=e.attr("alt"),h.imageAttributes.title=e.attr("title"),h.imageAttributes.description=e.attr(frizzly.attr.imageDescription),h.imageAttributes.caption=e.attr(frizzly.attr.imageCaption),h.articleAttributes.title=g(e),frizzly.buttons.handleClick(c,h)}function r(){var b=a(this),c=a();if(v.parentContainerSelector&&(c=b.parents(v.parentContainerSelector).first()),0===c.length){c=b;for(var d=0;d<v.parentContainerLevel;d++)c=c.parent()}c.length>0&&(frizzly.functions.transferDataAttributes(b,c),c.addClass(u.container))}var s=0,t={ignore:frizzly.attr.prefix+"Ignore",index:frizzly.attr.prefix+"Index",postContainer:frizzly.attr.prefix+"HoverContainer",timeoutId:frizzly.attr.prefix+"TimeoutId",timeoutId2:frizzly.attr.prefix+"TimeoutId2"},u={visible:"visible",overlay:frizzly.cssClass.prefix+"hover-overlay",container:frizzly.cssClass.prefix+"hover-container"},v={theme:"default48",buttonSet:"default",orientation:"horizontal",hoverPanelPosition:"middle-middle",imageSelector:String.format(".[0] img",u.container),imageHoverClass:"frizzly-image-hover",minImageHeight:100,minImageWidth:100,descriptionSource:["titleAttribute","altAttribute"],ignoreSelector:".wp-smiley",showOnLightbox:"1",enabledClasses:"*",parentContainerSelector:"",parentContainerLevel:2,hoverPanelOffsetLeft:0,hoverPanelOffsetTop:0};b.prototype=new frizzly.baseClasses.BaseContainer;var w={};return w.onReady=function(){a(String.format("input[{0}]",t.postContainer)).each(r),a(document).delegate(k(),"mouseenter",n),a(document).delegate(k(),"mouseleave",function(){var b=a(this).attr(t.index),c=a(i(b));o(c)}),a(document).delegate(i(),"mouseenter",function(){p(a(this))}),a(document).delegate(i(),"mouseleave",function(){o(a(this))})},w.onResize=function(){a(String.format("[{0}]",t.ignore)).each(function(){a(this).removeAttr(t.ignore)}),a(String.format("[{0}]",t.index)).each(function(){a(this).removeAttr(t.index)})},w.setSettings=function(b){v=a.extend(v,b)},w.settings=v,w.getActiveButtons=function(){return frizzly.getButtonSet(v.buttonSet)},w}()}(jQuery),function(a){frizzly[frizzly.moduleNames.lightbox]=frizzly.module[frizzly.moduleNames.lightbox]=function(){function b(a,b){switch(b){case"titleAttribute":return a.attr("title");case"altAttribute":return a.attr("alt");default:return""}}function c(a){for(var c="",e=0;e<d.descriptionSource.length&&!c;e++)c=b(a,d.descriptionSource[e]);return c}var d={pluginExists:"undefined"!=a.fn.colorbox,descriptionSource:["titleAttribute","altAttribute"],colorBoxSettings:{}},e={maxWidth:"95%",maxHeight:"95%",current:"{current} of {total}"},f={groupPrefix:frizzly.cssClass.prefix+"group-"},g={};return g.settings=d,g.setSettings=function(b){d=a.extend(d,b)},g.onReady=function(){d.pluginExists&&a(String.format("a:has(img[class*={0}])",f.groupPrefix)).each(function(){var b=a(this).find("img"),g=b.attr("class").match(String.format("{0}[0-9]+",f.groupPrefix)),h=c(b),i={rel:g[0],title:h,onComplete:function(){var c=a("img.cboxPhoto");c.attr({alt:b.attr("alt"),title:b.attr("title")}),frizzly.functions.transferFrizzlyDataAttributes(b,c),a("#cboxTitle").hide();var d='<p class="cboxBelowImageContent">'+a("#cboxTitle").html()+"</p>";a("#cboxLoadedContent").append(d).css({color:a("#cboxTitle").css("color")}),a.fn.colorbox.resize()}},j=a.extend(a.extend(e,d.colorBoxSettings),i);a(this).colorbox(j)})},g}()}(jQuery),function(a){frizzly.module[frizzly.moduleNames.shortcode]=function(){function b(){frizzly.baseClasses.BaseContainer.call(this,"horizontal"),this.addClass(g.containerInner),this.$outerContainer=a("<div/>",{"class":g.containerOuter})}function c(a){return a.parents(String.format(".{0}",g.containerInner))}function d(b){if("0"==frizzly.buttons.settings.generalUseFullImages)return b;var c=a(String.format('img[src="{0}"]',b)),d=c.length?frizzly.functions.getLinkedImage(c.first()):"";return""!=d?d:b}function e(c){a(String.format(".{0}.{1}{2}",g.container,g.prefix,c)).each(function(){var c=a(this),d=frizzly.getButtonSet(c.attr(frizzly.attr.buttonSet)),e=c.attr(frizzly.attr.theme),h=frizzly.getTheme(e),i=new b;i.addClass(frizzly.cssClass.prefix+e),i.$outerContainer.addClass(frizzly.getAlignmentClass(c.attr(frizzly.attr.align)));for(var j=!!c.attr(frizzly.attr.imageUrl),k=0;k<d.length;k++)if(d[k]!=frizzly.buttonTypes.pinterestShare||j){var l=new frizzly.baseClasses.Icon(h.buttons[d[k]].width,h.buttons[d[k]].height,d[k]);l.click(f),i.addIcon(l)}var m=i.createContainer();frizzly.functions.transferDataAttributes(c,m.find(String.format(".{0}",g.containerInner))),c.after(m),c.remove()})}function f(){var b=a(this),e=b.attr(frizzly.attr.type),f=c(b),g=new frizzly.baseClasses.ClickHandlerArg;return g.url=f.attr(frizzly.attr.postUrl),g.articleAttributes.title=f.attr(frizzly.attr.postTitle),g.imageAttributes.alt=f.attr(frizzly.attr.imageAlt),g.imageAttributes.title=f.attr(frizzly.attr.imageTitle),g.imageAttributes.description=f.attr(frizzly.attr.imageDescription),g.imageAttributes.caption=f.attr(frizzly.attr.imageCaption),g.imageAttributes.src=d(f.attr(frizzly.attr.imageUrl)),frizzly.buttons.handleClick(e,g)}var g={prefix:frizzly.cssClass.prefix+"shortcode-",container:frizzly.cssClass.prefix+"shortcode-container",containerOuter:frizzly.cssClass.prefix+"shortcode-container-outer",containerInner:frizzly.cssClass.prefix+"shortcode-container-inner"};b.prototype=new frizzly.baseClasses.BaseContainer,b.prototype.createContainer=function(){var a=frizzly.baseClasses.BaseContainer.prototype.createContainer.call(this);return this.$outerContainer.html(a)};var h={};return h.onReady=function(){},h.render=function(a){e(a)},h.setSettings=function(){},h}()}(jQuery);