//(function(){function n(n,t){this.player=n;this.controls=t;this.controls.addClass("playControls__wrapper")}$.fn.soundCloudControls=function(t,i){i===undefined&&(i="#FF4800");var r=SC.Widget(t);return this.each(function(){var t=new n(r,$(this));r.bind(SC.Widget.Events.READY,function(){t.init(i)})})};n.prototype.init=function(n){var t=this,i=$("<div>").addClass("playControls__controls"),r;this.prevControl=$("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__previous").text("Skip to previous");this.playControl=$("<button>").addClass("playControl").addClass("playControls__icon").addClass("sc-ir").text("Play current");this.nextControl=$("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__next").text("Skip to next");this.volumeControl=$("<button>").addClass("volume__button").addClass("volume__speakerIcon").addClass("sc-ir").text("Toggle mute");this.slider=$("<div>").addClass("slider");i.append(this.prevControl);i.append(this.playControl);i.append(this.nextControl);i.append(this.volumeControl);i.append(this.slider);this.controls.append(i);this.unmutedVolume=.5;window.localStorage&&(r=window.localStorage.getItem("SCControlsVol"),r!==null&&(this.unmutedVolume=Number(r)/100));this.setVolume(this.unmutedVolume);this.player.bind(SC.Widget.Events.PLAY,function(){t.playControl.addClass("playing").text("Pause current")});this.player.bind(SC.Widget.Events.PAUSE,function(){t.playControl.removeClass("playing").text("Play current")});this.prevControl.click(function(){t.goBack()});this.playControl.click(function(){t.togglePlay()});this.nextControl.click(function(){t.goForward()});this.volumeControl.click(function(){t.toggleMute()});this.slider.slider({range:"min",value:this.unmutedVolume*100,min:0,max:100,create:function(){$(this).find(".ui-slider-range").css("background",n)},slide:function(n,i){t.setVolume(i.value/100)},change:function(n,t){window.localStorage&&window.localStorage.setItem("SCControlsVol",t.value)}})};n.prototype.setVolume=function(n){this.player.setVolume(n);n===0?this.volumeControl.addClass("muted"):this.volumeControl.removeClass("muted");this.volumeControl.attr("data-level",Math.ceil(n*10))};n.prototype.togglePlay=function(){this.player.toggle()};n.prototype.goBack=function(){var n=this;this.player.getPosition(function(t){n.player.seekTo(0);t<3e3&&n.player.prev()})};n.prototype.goForward=function(){this.player.next()};n.prototype.toggleMute=function(){var n=this;this.player.getVolume(function(t){t===0?(n.setVolume(n.unmutedVolume),n.slider.slider("value",n.unmutedVolume*100)):(n.unmutedVolume=t,n.setVolume(0),n.slider.slider("value",0))})}})();
//# sourceMappingURL=sc-controls.min.js.map

(function () {
    // SoundCloud widget user controls - jQuery UI plugin

    $.fn.soundCloudControls = function (iFrameElementId, color) {
        if (color === undefined) {
            color = "#FF4800"; // default to typical SoundCloud orange
        }

        var player = SC.Widget(iFrameElementId);
        return this.each(function (index, element) {
            var soundCloudControls = new SoundCloudControls(player, $(this));
            player.bind(SC.Widget.Events.READY, function () {
                soundCloudControls.init(color);
            });
        });
    };

    /* SoundCloudControls wraps the SoundCloud widget and custom controls element */
    function SoundCloudControls(player, controlsElement) {
        this.player = player;
        this.controls = controlsElement;
        this.controls.addClass("playControls__wrapper");
    }
    SoundCloudControls.prototype.init = function (color) {
        var soundCloudControls = this;

        /* Create the custom controls elements */
        var playControls__controls = $("<div>").addClass("playControls__controls");
        this.prevControl = $("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__previous").text("Skip to previous");
        this.playControl = $("<button>").addClass("playControl").addClass("playControls__icon").addClass("sc-ir").text("Play current");
        this.nextControl = $("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__next").text("Skip to next");
        this.volumeControl = $("<button>").addClass("volume__button").addClass("volume__speakerIcon").addClass("sc-ir").text("Toggle mute");
        this.slider = $("<div>").addClass("slider");
        playControls__controls.append(this.prevControl);
        playControls__controls.append(this.playControl);
        playControls__controls.append(this.nextControl);
        playControls__controls.append(this.volumeControl);
        playControls__controls.append(this.slider);
        this.controls.append(playControls__controls);

        /* Initialize volume level */
        this.unmutedVolume = 0.5;
        if (window.localStorage) {
            var savedVolume = window.localStorage.getItem("SCControlsVol");
            if (savedVolume !== null) {
                this.unmutedVolume = Number(savedVolume) / 100;
            }
        }
        this.setVolume(this.unmutedVolume);

        /* Capture SoundCloud widget events for when the widget's built-in controls are used */
        this.player.bind(SC.Widget.Events.PLAY, function () {
            soundCloudControls.playControl.addClass("playing").text("Pause current");
        });
        this.player.bind(SC.Widget.Events.PAUSE, function () {
            soundCloudControls.playControl.removeClass("playing").text("Play current");
        });


        /* Assign event listeners to custom control buttons */
        this.prevControl.click(function () {
            soundCloudControls.goBack();
        });
        this.playControl.click(function () {
            soundCloudControls.togglePlay();
        });
        this.nextControl.click(function () {
            soundCloudControls.goForward();
        });
        this.volumeControl.click(function () {
            soundCloudControls.toggleMute();
        });

        /* Setup volume control slider */
        this.slider.slider({
            range: "min",
            value: this.unmutedVolume * 100,
            min: 0,
            max: 100,
            create: function (event, ui) {
                $(this).find(".ui-slider-range").css("background", color);
            },
            slide: function (event, ui) {
                soundCloudControls.setVolume(ui.value / 100);
            },
            change: function (event, ui) {
                if (window.localStorage) {
                    window.localStorage.setItem("SCControlsVol", ui.value);
                }
            }
        });
    };


    /* Perform actions on the SoundCloud widget */

    SoundCloudControls.prototype.setVolume = function (volume) {
        this.player.setVolume(volume);
		console.log(volume);
        /* Add attributes for CSS visualization */
        if (volume === 0) {
            this.volumeControl.addClass("muted");
        }
        else {
            this.volumeControl.removeClass("muted");
        }
        this.volumeControl.attr("data-level", Math.ceil(volume * 10));
    };
    SoundCloudControls.prototype.togglePlay = function () {
        this.player.toggle();
    };
    SoundCloudControls.prototype.goBack = function () {
        var soundCloudControls = this;
        this.player.getPosition(function (position) {
            soundCloudControls.player.seekTo(0);
            if (position < 3000) {
                soundCloudControls.player.prev();
            }
        });
    };
    SoundCloudControls.prototype.goForward = function () {
        this.player.next();
    };
    SoundCloudControls.prototype.toggleMute = function () {
        var soundCloudControls = this;
        this.player.getVolume(function (currentVolume) {
            if (currentVolume === 0) {
                soundCloudControls.setVolume(soundCloudControls.unmutedVolume);
                soundCloudControls.slider.slider("value", soundCloudControls.unmutedVolume * 100);
            }
            else {
                soundCloudControls.unmutedVolume = currentVolume;
                soundCloudControls.setVolume(0);
                soundCloudControls.slider.slider("value", 0);
            }
        });
    };

})();
